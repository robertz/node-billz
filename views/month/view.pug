extends ../layout

block content
    div
        .panel.panel-primary
            .panel-heading
                | #{moment(data.timing.startOfMonth).format('dddd, M/D/YYYY')} - #{moment(data.timing.endOfMonth).format('dddd, M/D/YYYY')}
            .panel-body
                .row
                    .col-xs-4
                        small(style='font-variant: small-caps;') Amount Due
                        h4 $#{formatCurrency(data.stats.monthlyTotal)}
                    .col-xs-4
                        small(style='font-variant: small-caps;') Amount Paid
                        h4 $#{formatCurrency(data.stats.amountPaid)}
                        small #{data.stats.pctPaid.toLocaleString('en-US')}% of month
                    .col-xs-4
                        small(style='font-variant: small-caps;') Amount Remaining
                        h4 $#{formatCurrency(data.stats.amountRemaining)}
                        small #{data.stats.pctRemain.toLocaleString('en-US')}% of month
            table.table
                thead
                    tr
                        th(width='20%') Date
                        th Name
                        th(width='10%') Mark Paid
                for payee in data.payees
                    tr(style=(payee.currentWeek == true) ? 'background-color: rgba(0, 0, 255, .12);' : undefined)
                        td 
                            if (payee.isToday)
                                strong #{moment(payee.date).format('dddd, M/D/YYYY')}
                            else 
                                | #{moment(payee.date).format('dddd, M/D/YYYY')}
                        td 
                            if (payee.isToday)
                                strong #{payee.name}
                            else 
                                | #{payee.name}
                            if (payee.url)
                                |    
                                a(href=payee.url target='_blank') <i class="fa fa-external-link"></i>
                            br
                            | #{payee.description}
                        td 
                            if payee.isPaid == false
                                a.btn.btn-warning(style='width: 100%' href='/payee/view/' + payee.id + '?dt=' + moment(payee.date).format('YYYY-MM-DD')) #{formatCurrency(payee.amount, {format: '%s%v', code: 'USD', symbol: '$'})}
                            else
                                a.btn.btn-success(style='width: 100%' href='/payee/view/' + payee.id) Paid